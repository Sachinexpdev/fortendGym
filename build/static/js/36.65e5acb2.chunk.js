(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[36],{817:function(e,t,c){"use strict";c.r(t);var s=c(664),l=c.n(s),a=c(665),r=c(659),n=c(2),o=c(657),d=(c(658),c(661)),i=c(660),j=c(24),u=new i.a;console.log(u.get("gym_uuid"));t.default=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),s=(t[0],t[1],Object(n.useState)(!1)),i=Object(r.a)(s,2),b=(i[0],i[1],Object(n.useState)(!1)),m=Object(r.a)(b,2),p=(m[0],m[1],Object(n.useState)(!1)),f=Object(r.a)(p,2),h=f[0],O=f[1],x=Object(n.useState)(!1),g=Object(r.a)(x,2),v=g[0],_=g[1],y=Object(n.useState)(!1),w=Object(r.a)(y,2),E=(w[0],w[1],Object(n.useState)(!1)),S=Object(r.a)(E,2),B=(S[0],S[1],Object(n.useState)(!1)),k=Object(r.a)(B,2),N=(k[0],k[1],Object(n.useState)([])),C=Object(r.a)(N,2),I=C[0],F=C[1],P=Object(n.useState)([]),T=Object(r.a)(P,2),U=(T[0],T[1],Object(n.useState)([])),D=Object(r.a)(U,2),R=D[0],q=D[1],A=c(662);function M(){return(M=Object(a.a)(l.a.mark((function e(){var t,c,s,a,r,n,o,i,j,b,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("role").value,c=document.getElementById("first_name").value,s=document.getElementById("last_name").value,a=document.getElementById("email").value,r=document.getElementById("dob").value,n=document.getElementById("gender").value,o=document.getElementById("password").value,i=document.querySelector("#profile_picture"),j=document.getElementById("confirm_password").value,console.log(j),console.log(o),o===j){e.next=15;break}alert("Passwords do not match."),e.next=36;break;case 15:return console.log("Trying to send request"),(b=new FormData).append("user_role",t),b.append("gym",u.get("gym_uuid")),b.append("first_name",c),b.append("last_name",s),b.append("email",a),b.append("gender",n),b.append("password",o),b.append("dob",r),b.append("profile_picture",i.files[0]),e.prev=26,console.log("Trying"),m={method:"post",url:d.a+"gymprofile/manager/",headers:{"content-type":"multipart/form-data; boundary=".concat(b._boundary)},data:b},e.next=31,A(m).then((function(e){return console.log(JSON.stringify(e.data)),200===e.status&&(200===e.status?window.location.reload():alert("BAD REQUEST")),e.data}));case 31:e.next=36;break;case 33:e.prev=33,e.t0=e.catch(26),console.error(e.t0);case 36:case"end":return e.stop()}}),e,null,[[26,33]])})))).apply(this,arguments)}Object(n.useEffect)((function(){A.get(d.a+"gymprofile/manager/?gym="+u.get("gym_uuid")).then((function(e){console.log(e.data.employee),F(e.data.employee)})).catch((function(e){console.log(e)}))}),[]),Object(n.useEffect)((function(){A.get(d.a+"gymprofile/gymroles/?gym="+u.get("gym_uuid")).then((function(e){console.log(e.data),q(e.data)})).catch((function(e){console.log(e)}))}),[]);var J=Object(n.useState)([]),V=Object(r.a)(J,2),z=V[0],G=V[1];function L(){return(L=Object(a.a)(l.a.mark((function e(t){var c,s,a,r,n,o,i,j,b;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=document.getElementById("update_role").value,s=document.getElementById("update_first_name").value,a=document.getElementById("update_last_name").value,r=document.getElementById("update_email").value,n=document.getElementById("update_dob").value,o=document.getElementById("update_gender").value,i=document.querySelector("#update_profile_picture"),console.log("Trying to send request"),(j=new FormData).append("uuid",t),j.append("user_role",c),j.append("first_name",s),j.append("last_name",a),j.append("email",r),j.append("gender",o),j.append("gym",u.get("gym_uuid")),j.append("dob",n),i.files[0]&&j.append("profile_picture",i.files[0]),e.prev=18,console.log("Trying"),b={method:"patch",url:d.a+"user/userupdate/",headers:{"content-type":"multipart/form-data; boundary=".concat(j._boundary)},data:j},e.next=23,A(b).then((function(e){return console.log(JSON.stringify(e.data)),200===e.status&&(200===e.status?window.location.reload():alert("BAD REQUEST")),e.data}));case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(18),console.error(e.t0);case 28:case"end":return e.stop()}}),e,null,[[18,25]])})))).apply(this,arguments)}function Q(){return(Q=Object(a.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),console.log("Trying to send request"),e.prev=2,'<div><div class="loader centered"/></div>',console.log("Trying"),e.next=7,A.delete(d.a+"user/"+t+"/",{uuid:t});case 7:return 204===(c=e.sent).status&&(console.log(c.status),console.log(c.data),window.location.reload()),e.abrupt("return",c.data);case 12:e.prev=12,e.t0=e.catch(2),console.error("Signup Failed , Please try again."),window.location.reload(),alert(e.t0);case 17:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}return u.get("perms").includes("Users")?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(o.wb,{children:[Object(j.jsx)("div",{className:"col-md-12",children:Object(j.jsx)("div",{className:"manage_top_btn",children:Object(j.jsx)("div",{className:"manage-btn-left",children:Object(j.jsxs)("button",{className:"mn_btn_1 mr-1",onClick:function(){return O(!h)},children:[" ",Object(j.jsx)("i",{class:"fa fa-plus-circle","aria-hidden":"true"})," Add User "]})})})}),Object(j.jsx)(o.u,{xs:"12",lg:"12",children:Object(j.jsx)(o.j,{children:Object(j.jsx)("div",{className:"col-md-12",children:Object(j.jsx)("div",{className:"manage-table-main",children:Object(j.jsxs)("table",{class:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{children:"Name"}),Object(j.jsx)("th",{children:"Email"}),Object(j.jsx)("th",{children:"Role"}),Object(j.jsx)("th",{children:"Action"})]})}),Object(j.jsx)("tbody",{children:I.map((function(e){return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{children:e.name}),Object(j.jsx)("td",{children:e.email}),Object(j.jsx)("td",{children:e.role}),Object(j.jsxs)("td",{children:[Object(j.jsx)(o.f,{color:"primary",onClick:function(){return t=e.uuid,_(!v),void A.get(d.a+"user/"+t).then((function(e){console.log(e),G(e.data[0])}));var t},children:"Manage"})," ",Object(j.jsx)("button",{type:"button",class:"btn btn-danger",onClick:function(){return function(e){return Q.apply(this,arguments)}(e.uuid)},children:Object(j.jsx)("i",{class:"fa fa-trash-o","aria-hidden":"true"})})]})]})}))})]})})})})})]}),Object(j.jsxs)(o.gb,{show:h,onClose:O,size:"lg",children:[Object(j.jsx)(o.jb,{closeButton:!0,className:"add-user-modal",children:Object(j.jsx)(o.kb,{children:"Add User"})}),Object(j.jsx)(o.hb,{children:Object(j.jsx)("div",{class:"col-md-12",children:Object(j.jsxs)("div",{class:"row",children:[Object(j.jsx)("div",{class:"col-sm-6",children:Object(j.jsxs)("div",{class:"form-group",children:[Object(j.jsx)("label",{class:"form-label",for:"expense_name",children:"First Name"}),Object(j.jsx)("input",{type:"text",id:"first_name",name:"first_name",class:"form-control"})]})}),Object(j.jsx)("div",{class:"col-sm-6",children:Object(j.jsxs)("div",{class:"form-group",children:[Object(j.jsx)("label",{class:"form-label",for:"expense_name",children:"Last Name"}),Object(j.jsx)("input",{type:"text",id:"last_name",name:"last_name",class:"form-control"})]})}),Object(j.jsx)("div",{class:"col-sm-6",children:Object(j.jsxs)("div",{class:"form-group",children:[Object(j.jsx)("label",{class:"form-label",for:"date_paid",children:"Email"}),Object(j.jsx)("input",{type:"email",id:"email",name:"email",class:"form-control"})]})}),Object(j.jsx)("div",{class:"col-sm-6",children:Object(j.jsxs)("div",{class:"form-group",children:[Object(j.jsx)("label",{class:"form-label",for:"date_paid",children:"Password"}),Object(j.jsx)("input",{type:"password",id:"password",name:"password",class:"form-control"})]})}),Object(j.jsx)("div",{class:"col-sm-6",children:Object(j.jsxs)("div",{class:"form-group",children:[Object(j.jsx)("label",{class:"form-label",for:"date_paid",children:"Confirm Password"}),Object(j.jsx)("input",{type:"password",id:"confirm_password",name:"cpassword",class:"form-control"})]})}),Object(j.jsx)("div",{class:"col-sm-6",children:Object(j.jsxs)("div",{class:"form-group",children:[Object(j.jsx)("label",{class:"form-label",for:"date_paid",children:"Profile Picture"}),Object(j.jsx)("input",{type:"file",id:"profile_picture",name:"profilepic",class:"form-control"})]})}),Object(j.jsx)("div",{class:"col-sm-6",children:Object(j.jsxs)("div",{class:"form-group",children:[Object(j.jsx)("label",{class:"form-label",for:"date_paid",children:"Date of Birth"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"date",id:"dob",name:"dob",class:"form-control"})]})}),Object(j.jsx)("div",{class:"col-sm-6",children:Object(j.jsxs)("div",{class:"form-group",children:[Object(j.jsx)("label",{class:"form-label",for:"date_paid",children:"Gender"}),Object(j.jsxs)("select",{id:"gender",class:"form-control",children:[Object(j.jsx)("option",{value:"Male",children:"Male"}),Object(j.jsx)("option",{value:"Female",children:"Female"})]})]})}),Object(j.jsx)("div",{class:"col-sm-6",children:Object(j.jsxs)("div",{class:"form-group",children:[Object(j.jsx)("label",{class:"form-label",for:"date_paid",children:"Role"}),Object(j.jsx)("select",{id:"role",class:"form-control",children:R.map((function(e){return Object(j.jsxs)("option",{value:e.uuid,children:[" ",e.user_roles," "]})}))})]})})]})})}),Object(j.jsx)(o.ib,{children:Object(j.jsxs)("div",{className:"col-md-12 text-center",children:[Object(j.jsx)(o.f,{color:"primary",onClick:function(){return M.apply(this,arguments)},children:"Save"})," ",Object(j.jsx)(o.f,{color:"secondary",onClick:function(){return O(!1)},children:"Close"})]})})]}),Object(j.jsxs)(o.gb,{show:v,onClose:_,size:"lg",children:[Object(j.jsx)(o.jb,{closeButton:!0,className:"add-user-modal",children:Object(j.jsx)(o.kb,{children:"Update User"})}),Object(j.jsx)(o.hb,{children:Object(j.jsx)("div",{class:"card-body",children:Object(j.jsxs)("div",{class:"row",children:[Object(j.jsx)("div",{class:"col-sm-6",children:Object(j.jsxs)("div",{class:"form-group",children:[Object(j.jsx)("label",{class:"form-label",for:"expense_name",children:"First Name"}),Object(j.jsx)("input",{type:"text",id:"update_first_name",defaultValue:z.first_name,name:"first_name",class:"form-control"})]})}),Object(j.jsx)("div",{class:"col-sm-6",children:Object(j.jsxs)("div",{class:"form-group",children:[Object(j.jsx)("label",{class:"form-label",for:"expense_name",children:"Last Name"}),Object(j.jsx)("input",{type:"text",defaultValue:z.last_name,id:"update_last_name",name:"last_name",class:"form-control"})]})}),Object(j.jsx)("div",{class:"col-sm-6",children:Object(j.jsxs)("div",{class:"form-group",children:[Object(j.jsx)("label",{class:"form-label",for:"date_paid",children:"Email"}),Object(j.jsx)("input",{type:"email",defaultValue:z.email,id:"update_email",name:"email",class:"form-control"})]})}),Object(j.jsx)("div",{class:"col-sm-6",children:Object(j.jsxs)("div",{class:"form-group",children:[Object(j.jsx)("label",{class:"form-label",for:"date_paid",children:"Profile Picture"}),Object(j.jsxs)("label",{class:"hint form-label",for:"first_name",children:["Current Image - ",z.profile_picture," "]}),Object(j.jsx)("input",{type:"file",id:"update_profile_picture",name:"profilepic",class:"form-control"})]})}),Object(j.jsx)("div",{class:"col-sm-6",children:Object(j.jsxs)("div",{class:"form-group",children:[Object(j.jsx)("label",{class:"form-label",for:"date_paid",children:"Date of Birth"}),Object(j.jsx)("br",{}),Object(j.jsx)("input",{type:"date",id:"update_dob",defaultValue:z.dob,name:"dob",class:"form-control"})]})}),Object(j.jsx)("div",{class:"col-sm-6",children:Object(j.jsxs)("div",{class:"form-group",children:[Object(j.jsx)("label",{class:"form-label",for:"date_paid",children:"Gender"}),Object(j.jsxs)("label",{class:"hint form-label",for:"first_name",children:["Current  - ",z.gender," "]}),Object(j.jsxs)("select",{id:"update_gender",class:"form-control",children:[Object(j.jsx)("option",{value:"Male",children:"Male"}),Object(j.jsx)("option",{value:"Female",children:"Female"})]})]})}),Object(j.jsx)("div",{class:"col-sm-6",children:Object(j.jsxs)("div",{class:"form-group",children:[Object(j.jsx)("label",{class:"form-label",for:"date_paid",children:"Role"}),Object(j.jsxs)("label",{class:"hint form-label",for:"first_name",children:["Current Role - ",z.user_role," "]}),Object(j.jsx)("select",{id:"update_role",class:"form-control",children:R.map((function(e){return Object(j.jsxs)("option",{value:e.uuid,children:[" ",e.user_roles," "]})}))})]})})]})})}),Object(j.jsxs)(o.ib,{children:[Object(j.jsx)(o.f,{color:"primary",onClick:function(){return function(e){return L.apply(this,arguments)}(z.uuid)},children:"Save"})," ",Object(j.jsx)(o.f,{color:"secondary",onClick:function(){return _(!1)},children:"Close"})]})]})]}):window.location.href="#/dashboard"}}}]);
//# sourceMappingURL=36.65e5acb2.chunk.js.map