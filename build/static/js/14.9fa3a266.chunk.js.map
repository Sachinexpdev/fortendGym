{"version":3,"sources":["views/base/Permissions/PermissionsList.js","views/base/Permissions/manage_perms.js"],"names":["PermissionsList","title","id","cookies","Cookies","axios","require","WorkFlow","props","state","workflows","user_groups","section_wise_permissions","users","user_roles","url","BASE_URL","get","section","document","getElementById","value","$","val","control","includes","alert","config","method","headers","Authorization","data","base_wallet","then","re","message","window","location","reload","catch","err","permissions","Array","role","map","perms","is","push","setState","config2","console","log","innerHTML","html","a","delete","status","className","class","href","for","onClick","AddNew","this","wf","for_role","perm","type","AddPerMissionsGroup","React","Component"],"mappings":"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","file":"static/js/14.9fa3a266.chunk.js","sourcesContent":["const PermissionsList = [\r\n    {\r\n        title:\"Packages\",\r\n        id:\"1\"\r\n    },\r\n    {\r\n        title:\"Dashboard\",\r\n        id:\"2\"\r\n    },\r\n    {\r\n        title:\"CRM\",\r\n        id:\"3\"\r\n    },\r\n    {\r\n        title:\"Product\",\r\n        id:\"4\"\r\n    },\r\n    {\r\n        title:\"Instructor\",\r\n        id:\"5\"\r\n    },\r\n    {\r\n        title:\"Bookings\",\r\n        id:\"6\"\r\n    },\r\n    {\r\n        title:\"Billing\",\r\n        id:\"7\"\r\n    },\r\n    {\r\n        title:\"Expenses\",\r\n        id:\"8\"\r\n    },\r\n    {\r\n        title:\"Reports\",\r\n        id:\"9\"\r\n    },\r\n    {\r\n        title:\"Billing\",\r\n        id:\"10\"\r\n    },\r\n    {\r\n        title:\"Holidays\",\r\n        id:\"11\"\r\n    },\r\n    {\r\n        title:\"Calender\",\r\n        id:\"12\"\r\n    },\r\n    {\r\n        title:\"Membership\",\r\n        id:\"13\"\r\n    },\r\n    {\r\n        title:\"Users\",\r\n        id:\"14\"\r\n    },\r\n    {\r\n        title:\"Gymprofile\",\r\n        id:\"15\"\r\n    },\r\n\r\n]\r\n\r\n\r\nexport default PermissionsList;","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\n// import WeareGlad from \"../WeareGlad\";\r\nimport $ from \"jquery\";\r\nimport Cookies from \"universal-cookie\";\r\nimport BASE_URL from \"src/views/base\";\r\n// import BASE_URL from \"../base\";\r\nimport PermissionsList from \"./PermissionsList\";\r\n// import Iframe from \"react-iframe\";\r\n// import TopupPermissions from \"../PermissionList/TopupPermissions\";\r\n// import WithdrawPermissions from \"../PermissionList/WithdrawPermissions\";\r\n// import SendPermissions from \"../PermissionList/SendPermissions\";\r\n// import UtilitiesPermissions from \"../PermissionList/UtilitiesPermissions\";\r\n// import RetailPermissions from \"../PermissionList/RetailPermissions\";\r\n// import ProfileSection from \"../PermissionList/ProfileSection\";\r\n// import { toastr } from \"react-redux-toastr\";\r\n// import timeSensativeAction from \"../sleep_helper\";\r\nconst cookies = new Cookies();\r\nconst axios = require(\"axios\");\r\n\r\n\r\n\r\nclass WorkFlow extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      workflows:[],\r\n      user_groups:[],\r\n      section_wise_permissions:[],\r\n      users: [],\r\n      user_roles:[]\r\n    };\r\n  }\r\n\r\n  AddWorkFlow(){\r\n      var url = BASE_URL+'user/roles/permissions/?gym=' + cookies.get('gym_uuid');\r\n      \r\n      var section = document.getElementById('section').value;\r\n      var user_roles = $(\"#roles\").val();\r\n      var control=0\r\n      if (user_roles.includes('Verifier') || user_roles.includes('Authorizer')){\r\n        if (!user_roles.includes('Initiator') || !user_roles.includes('Approver')){\r\n          control=1;\r\n        }\r\n\r\n      }\r\n      if(user_roles.includes('Initiator')){\r\n        if (!user_roles.includes('Approver')){\r\n          control=1;\r\n        }\r\n      }\r\n      if (control===1){\r\n        alert('Initiator and Approver is Mandatory when you have verifier or authorizer')\r\n        // window.location.reload()\r\n      }\r\n      if (control!==1){\r\n        var config={\r\n          url:url,\r\n          method:\"post\",\r\n          headers: {\r\n            Authorization: \"Bearer \",\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          data:{base_wallet:cookies.get('wallet_id'),section:section,user_roles:user_roles}\r\n        };\r\n        axios(config)\r\n        .then(re=>{\r\n            alert(re.data.message);\r\n            window.location.reload();\r\n        })\r\n        .catch(err=>{\r\n            // alert(\"Error Please Try Again\");;\r\n        })\r\n      }\r\n      \r\n  }\r\n\r\n  AddPerMissionsGroup(){\r\n    var url = BASE_URL+'user/roles/permissions/';\r\n    \r\n    var permissions = new Array();\r\n    // var section = document.getElementById('perm_grp_section').value;\r\n    var role = document.getElementById('perm_grp_role').value;\r\n\r\n    PermissionsList.map(perms=>{\r\n        if ($(\"#\"+perms.id).is(\":checked\")){\r\n            permissions.push(perms.id);\r\n        }\r\n    })\r\n    \r\n  \r\n    var config={\r\n      url:url,\r\n      method:\"post\",\r\n      data:{\"permissions\":permissions,\"role\":role}\r\n    };\r\n    axios(config)\r\n    .then(re=>{\r\n        alert(re.data.message);\r\n        window.location.reload();\r\n    }).catch(err=>{\r\n        // alert(\"Error Please Try Again\");;\r\n    })\r\n  }\r\n\r\n  componentDidMount(){\r\n    var url = BASE_URL+'wallet/section_workflow/?wallet_id='+cookies.get('wallet_id');\r\n  \r\n    var config={\r\n      url:url,\r\n      method:\"get\",\r\n      headers: {\r\n        Authorization: \"Bearer \",\r\n        \"Content-Type\": \"application/json\",\r\n      }\r\n    };\r\n    axios(config)\r\n    .then(re=>{\r\n        this.setState({workflows:re.data.data});\r\n    }).catch(err=>{\r\n        // alert(\"Error Please Try Again\");;\r\n    })\r\n\r\n\r\n    var config2={\r\n      method: \"get\",\r\n      url: BASE_URL+'user/roles/permissions/?gym='+cookies.get('gym_uuid'),\r\n     \r\n  }\r\n  axios(config2)\r\n    .then(re=>{\r\n        console.log(re)\r\n         this.setState({user_groups:re.data});\r\n    })\r\n    \r\n    .catch(err=>{\r\n      // alert(\"Error Please Try Again\");;\r\n    })\r\n\r\n  }\r\n\r\n\r\n  AddNew(){\r\n    if($('#group_name').is(\"select\")) {\r\n      document.getElementById('grp_div').innerHTML='';\r\n      document.getElementById('grp_div').innerHTML='<input type=\"text\" id=\"group_name\" className=\"form-control\"/>';\r\n      $(\"#change_btn\").html('Select from list');\r\n}\r\nelse{\r\n  window.location.reload();\r\n}\r\n    \r\n  }\r\n\r\n  async RemoveWorkflow(id){\r\n    // alert('here')\r\n    var url = BASE_URL+'wallet/work_flow_detail/'+id;\r\n    const x = await axios.delete(url);\r\n\r\n      if (x.status === 204) {\r\n        // toastr.success('Workflow Deleted')\r\n        // timeSensativeAction(5000);\r\n        // window.location = \"/account\";\r\n      } else {\r\n        // alert(\"Error\");\r\n      }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"signup_form\">\r\n        <h3>Add WorkFlow</h3>\r\n        <div className=\"alredy_ac text-center\">\r\n         \r\n        </div>\r\n     \r\n                          \r\n        \r\n        {/*         \r\n        <div class=\"buytabs01 bnk-pay\">\r\n                        <ul class=\"nav nav-tabs row \" role=\"tablist\"> */}\r\n\r\n        <button class=\"nav nav-tabs buytabs01 row\" role=\"presentation\">\r\n          <a href=\"#home\" aria-controls=\"home\" role=\"tab\" data-toggle=\"tab\">\r\n            <span class=\"btnz2\">\r\n              <i class=\"fa fa-plus-square\" aria-hidden=\"true\"></i> Add Permission Group\r\n            </span>\r\n          </a>\r\n        </button>\r\n      \r\n        {/* </ul></div> */}\r\n        <div class=\"tab-content rent-tabs-content\">\r\n        <div role=\"tabpanel\" class=\"tab-pane\" id=\"home\">\r\n        <br/>\r\n       \r\n        <div>\r\n          <h3>Group Info</h3>\r\n        </div>\r\n          <div class=\"col-md-4 col-sm-4 col-xs-12\">\r\n          <div className=\"form-group\">\r\n            <label for=\"sel1\">Role Name</label><button id=\"change_btn\" class=\"click_btn\" onClick={()=>this.AddNew()}>New Role</button>\r\n             <div id='grp_div'>\r\n             {/* <input type=\"text\" id=\"group_name\" className=\"form-control\"/> */}\r\n             <select id=\"group_name\" class=\"form-control\">\r\n               {this.state.user_groups.map(wf=>{\r\n                 return <option>{wf.for_role}</option>\r\n               })}\r\n             </select>\r\n            </div>\r\n             </div>\r\n             \r\n          </div>\r\n\r\n         \r\n         \r\n          <h4>Add Permissions</h4>\r\n          <br></br>\r\n          <div class=\"row text-center\">\r\n            {PermissionsList.map((perm) => {\r\n              return <div className=\"col-xs-4\">\r\n                  <label className=\"container_signup\">\r\n                    {perm.title}\r\n                    <input id={perm.id} value={perm.title} type=\"checkbox\" />\r\n                    <span className=\"checkmark\"></span>\r\n                  </label>\r\n                </div>\r\n              \r\n             })} \r\n            \r\n          </div>\r\n          <div class=\"text-center toppad-20\">\r\n                    <button\r\n                    class=\"btn btnz btn-info btn-lg\"\r\n                    onClick={this.AddPerMissionsGroup}\r\n                  >\r\n                    Add Group\r\n                  </button>\r\n                  </div>\r\n        </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default WorkFlow;\r\n\r\n\r\n\r\n\r\n"],"sourceRoot":""}