(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[52],{818:function(e,t,c){"use strict";c.r(t);var n=c(664),s=c.n(n),a=c(665),r=c(659),l=c(2),o=c(657),i=(c(658),c(661)),d=c(660),u=(c(666),c(24)),j=new d.a;t.default=function(){var e=Object(l.useState)(!1),t=Object(r.a)(e,2),n=(t[0],t[1],Object(l.useState)(!1)),d=Object(r.a)(n,2),b=(d[0],d[1],Object(l.useState)(!1)),m=Object(r.a)(b,2),h=(m[0],m[1],Object(l.useState)(!1)),O=Object(r.a)(h,2),p=O[0],f=O[1],x=Object(l.useState)(!1),g=Object(r.a)(x,2),y=g[0],v=g[1],_=Object(l.useState)(!1),w=Object(r.a)(_,2),S=(w[0],w[1],Object(l.useState)(!1)),k=Object(r.a)(S,2),N=(k[0],k[1],Object(l.useState)(!1)),C=Object(r.a)(N,2),B=(C[0],C[1],Object(l.useState)([])),E=Object(r.a)(B,2),I=E[0],A=E[1],R=c(662);Object(l.useEffect)((function(){R.get(i.a+"gymprofile/gymroles/?gym="+j.get("gym_uuid")).then((function(e){console.log(e.data),A(e.data)})).catch((function(e){console.log(e)}))}),[]);var U=Object(l.useState)([]),J=Object(r.a)(U,2),T=J[0],q=(J[1],Object(l.useState)([])),z=Object(r.a)(q,2);z[0],z[1];function D(){return(D=Object(a.a)(s.a.mark((function e(){var t,c,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.a+"gymprofile/gymroles/",c=document.getElementById("role").value,n={url:t,method:"post",data:{user_roles:c,gym:j.get("gym_uuid")}},R(n).then((function(e){window.location.reload()})).catch((function(e){}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return(F=Object(a.a)(s.a.mark((function e(t){var c,n,a,r,l,o,d,u,j;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=document.getElementById("update_role").value,n=document.getElementById("update_first_name").value,a=document.getElementById("update_last_name").value,r=document.getElementById("update_email").value,l=document.getElementById("update_dob").value,o=document.getElementById("update_gender").value,d=document.querySelector("#update_profile_picture"),console.log("Trying to send request"),(u=new FormData).append("user_role",c),u.append("first_name",n),u.append("last_name",a),u.append("email",r),u.append("gender",o),u.append("dob",l),u.append("profile_picture",d.files[0]),e.prev=16,console.log("Trying"),j={method:"patch",url:i.a+"user/"+t+"/",headers:{"content-type":"multipart/form-data; boundary=".concat(u._boundary)},data:u},e.next=21,R(j).then((function(e){return console.log(JSON.stringify(e.data)),200===e.status&&(200===e.status?window.location.reload():alert("BAD REQUEST")),e.data}));case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(16),console.error(e.t0);case 26:case"end":return e.stop()}}),e,null,[[16,23]])})))).apply(this,arguments)}function P(){return(P=Object(a.a)(s.a.mark((function e(t){var c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=i.a+"gymprofile/gymroles/"+t,e.next=3,R.delete(c);case 3:200===e.sent.status&&window.location.reload();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(o.wb,{children:[Object(u.jsx)("div",{className:"col-md-12",children:Object(u.jsx)("div",{className:"manage_top_btn",children:Object(u.jsxs)("div",{className:"manage-btn-left",children:[Object(u.jsxs)("button",{className:"mn_btn_1 mr-1",onClick:function(){return f(!p)},children:[" ",Object(u.jsx)("i",{class:"fa fa-plus-circle","aria-hidden":"true"})," Add Role "]}),Object(u.jsxs)("button",{className:"mn_btn_1 mr-1",onClick:function(){return window.location.href="#/base/permissions"},children:[" ",Object(u.jsx)("i",{class:"fa fa-plus-circle","aria-hidden":"true"})," Add Permission "]})]})})}),Object(u.jsx)(o.u,{xs:"12",lg:"12",children:Object(u.jsx)(o.j,{children:Object(u.jsx)("div",{className:"col-md-12",children:Object(u.jsx)("div",{className:"manage-table-main",children:Object(u.jsxs)("table",{class:"table",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Role"}),Object(u.jsx)("th",{children:"Action"})]})}),Object(u.jsx)("tbody",{children:I.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.user_roles}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{type:"button",class:"btn btn-danger",onClick:function(){return function(e){return P.apply(this,arguments)}(e.uuid)},children:Object(u.jsx)("i",{class:"fa fa-trash-o","aria-hidden":"true"})})})]})}))})]})})})})})]}),Object(u.jsxs)(o.gb,{show:p,onClose:f,size:"lg",children:[Object(u.jsx)(o.jb,{closeButton:!0,className:"add-user-modal",children:Object(u.jsx)(o.kb,{children:"Add User"})}),Object(u.jsx)(o.hb,{children:Object(u.jsx)("div",{class:"col-md-12",children:Object(u.jsx)("div",{class:"row",children:Object(u.jsx)("div",{class:"col-sm-6",children:Object(u.jsxs)("div",{class:"form-group",children:[Object(u.jsx)("label",{class:"form-label",for:"expense_name",children:"Role"}),Object(u.jsx)("input",{id:"role",name:"role",className:"form-control"})]})})})})}),Object(u.jsx)(o.ib,{children:Object(u.jsxs)("div",{className:"col-md-12 text-center",children:[Object(u.jsx)(o.f,{color:"primary",onClick:function(){return function(){return D.apply(this,arguments)}()},children:"Save"})," ",Object(u.jsx)(o.f,{color:"secondary",onClick:function(){return f(!1)},children:"Close"})]})})]}),Object(u.jsxs)(o.gb,{show:y,onClose:v,size:"lg",children:[Object(u.jsx)(o.jb,{closeButton:!0,className:"add-user-modal",children:Object(u.jsx)(o.kb,{children:"Update User"})}),Object(u.jsx)(o.hb,{children:Object(u.jsx)("div",{class:"card-body",children:Object(u.jsxs)("div",{class:"row",children:[Object(u.jsx)("div",{class:"col-sm-6",children:Object(u.jsxs)("div",{class:"form-group",children:[Object(u.jsx)("label",{class:"form-label",for:"expense_name",children:"Role"}),Object(u.jsx)("input",{type:"text",defaultValue:T.for_role,id:"update_first_name",name:"first_name",class:"form-control"})]})}),Object(u.jsx)(o.u,{md:"12",children:Object(u.jsx)(o.cb,{className:"mr-0",children:"Permissions"})}),Object(u.jsx)(o.u,{md:"12"})]})})}),Object(u.jsxs)(o.ib,{children:[Object(u.jsx)(o.f,{color:"primary",onClick:function(){return function(e){return F.apply(this,arguments)}()},children:"Save"})," ",Object(u.jsx)(o.f,{color:"secondary",onClick:function(){return v(!1)},children:"Close"})]})]})]})}}}]);
//# sourceMappingURL=52.4c11a684.chunk.js.map