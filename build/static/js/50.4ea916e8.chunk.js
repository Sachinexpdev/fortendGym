(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[50],{810:function(e,c,t){"use strict";t.r(c);var s=t(664),n=t.n(s),l=t(665),a=t(659),r=t(2),o=t(666),i=t.n(o),u=t(657),d=(t(658),t(661)),j=t(660),b=t(24),m=new j.a;console.log(m.get("gym_uuid"));c.default=function(){var e=Object(r.useState)(!1),c=Object(a.a)(e,2),s=(c[0],c[1],Object(r.useState)(!1)),o=Object(a.a)(s,2),j=(o[0],o[1],Object(r.useState)(!1)),O=Object(a.a)(j,2),h=(O[0],O[1],Object(r.useState)(!1)),x=Object(a.a)(h,2),f=x[0],p=x[1],g=Object(r.useState)(!1),y=Object(a.a)(g,2),v=y[0],_=y[1],w=Object(r.useState)(!1),S=Object(a.a)(w,2),k=(S[0],S[1],Object(r.useState)(!1)),C=Object(a.a)(k,2),E=(C[0],C[1],Object(r.useState)(!1)),N=Object(a.a)(E,2),A=(N[0],N[1],Object(r.useState)([])),B=Object(a.a)(A,2),I=B[0],U=B[1],T=Object(r.useState)([]),F=Object(a.a)(T,2),G=F[0],J=F[1],R=Object(r.useState)([]),q=Object(a.a)(R,2),z=q[0],D=q[1],M=Object(r.useState)([]),P=Object(a.a)(M,2),Q=P[0],H=P[1],K=t(662);Object(r.useEffect)((function(){K.get(d.a+"payments/gymrule/").then((function(e){console.log(e),U(e.data)})).catch((function(e){console.log(e)}))}),[]),Object(r.useEffect)((function(){K.get(d.a+"payments/maxusage/").then((function(e){console.log(e),J(e.data)})).catch((function(e){console.log(e)}))}),[]),Object(r.useEffect)((function(){K.get(d.a+"user/subscribed/userslist/?gym_id="+m.get("gym_uuid")).then((function(e){console.log(e),D(e.data)})).catch((function(e){console.log(e)}))}),[]),Object(r.useEffect)((function(){K.get(d.a+"gymprofile/").then((function(e){console.log(e),H(e.data)})).catch((function(e){console.log(e)}))}),[]);var L=Object(r.useState)([]),V=Object(a.a)(L,2),W=V[0];V[1];function X(){return(X=Object(l.a)(n.a.mark((function e(){var c,t,s,l,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c=document.getElementById("all_gyms").value,t=i()("#gyms").val(),s=new FormData,l=0;l<t.length;l++)s.append("gyms",t[l]);return s.append("all_gyms",c),console.log("Trying to send request"),e.prev=7,console.log("Trying"),a={method:"post",url:d.a+"payments/gymrule/",headers:{"content-type":"multipart/form-data; boundary=".concat(s._boundary)},data:s},e.next=12,K(a).then((function(e){return console.log(JSON.stringify(e.data)),200===e.status?window.location.reload():alert("BAD REQUEST"),e.data}));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[7,14]])})))).apply(this,arguments)}function Y(){return(Y=Object(l.a)(n.a.mark((function e(){var c,t,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=document.getElementById("gym_ruleset").value,t=document.getElementById("max_usage").value,console.log("Trying to send request"),e.prev=3,console.log("Trying"),e.next=7,K.post(d.a+"payments/rulesets/",{gyms_ruleset:c,max_uses_rule:t});case 7:return 201===(s=e.sent).status&&(alert("success"),console.log(s.status),console.log(s.data),window.location.reload()),e.abrupt("return",s.data);case 12:e.prev=12,e.t0=e.catch(3),console.error("Signup Failed , Please try again."),window.location.reload(),alert(e.t0);case 17:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(u.wb,{children:Object(b.jsxs)("div",{className:"col-md-12",children:[Object(b.jsx)("h3",{children:"Ruleset"}),Object(b.jsxs)("div",{class:"row",children:[Object(b.jsx)("div",{class:"col-sm-6",children:Object(b.jsxs)("div",{class:"form-group",children:[Object(b.jsx)("label",{class:"form-label",for:"expense_name",children:"Gym Ruleset"}),Object(b.jsx)("button",{className:"add",onClick:function(){return p(!f)},children:"+"}),Object(b.jsx)("select",{id:"gym_ruleset",class:"form-control",children:I.map((function(e){return""==e.gyms?Object(b.jsx)("option",{value:e.uuid,children:" All gyms "}):Object(b.jsxs)("option",{value:e.uuid,children:[" ",e.gyms," "]})}))})]})}),Object(b.jsx)("div",{class:"col-sm-6",children:Object(b.jsxs)("div",{class:"form-group",children:[Object(b.jsx)("label",{class:"form-label",for:"expense_name",children:"Max Usage / User"}),Object(b.jsx)("button",{className:"add",onClick:function(){_(!v)},children:"+"}),Object(b.jsx)("select",{id:"max_usage",class:"form-control",children:G.map((function(e){return Object(b.jsxs)("option",{value:e.uuid,children:[" ",e.max_usage_per_user," "]})}))})]})}),Object(b.jsxs)("div",{className:"col-md-12 text-center",children:[Object(b.jsx)(u.f,{color:"primary",onClick:function(){return function(){return Y.apply(this,arguments)}()},children:"Save"})," "]})]})]})}),Object(b.jsxs)(u.gb,{show:f,onClose:p,size:"lg",children:[Object(b.jsx)(u.jb,{closeButton:!0,className:"add-user-modal",children:Object(b.jsx)(u.kb,{children:"Add Instructor"})}),Object(b.jsx)(u.hb,{children:Object(b.jsx)("div",{class:"col-md-12",children:Object(b.jsxs)("div",{class:"row",children:[Object(b.jsx)("div",{class:"col-sm-6",children:Object(b.jsxs)("div",{class:"form-group",children:[Object(b.jsx)("label",{class:"form-label",for:"expense_name",children:"Include All Gyms"}),Object(b.jsx)("input",{type:"checkbox",id:"all_gyms"})]})}),Object(b.jsx)("div",{class:"col-sm-6",children:Object(b.jsxs)("div",{class:"form-group",children:[Object(b.jsx)("label",{class:"form-label",for:"expense_name",children:"Gyms"}),Object(b.jsx)("select",{id:"gyms",class:"form-control",multiple:!0,children:Q.map((function(e){return Object(b.jsxs)("option",{value:e.uuid,children:[" ",e.gym_name," "]})}))}),Object(b.jsx)("input",{type:"hidden",value:W.uuid,id:"update_uuid"})]})})]})})}),Object(b.jsx)(u.ib,{children:Object(b.jsxs)("div",{className:"col-md-12 text-center",children:[Object(b.jsx)(u.f,{color:"primary",onClick:function(){return function(){return X.apply(this,arguments)}()},children:"Save"})," ",Object(b.jsx)(u.f,{color:"secondary",onClick:function(){return p(!1)},children:"Close"})]})})]}),Object(b.jsxs)(u.gb,{show:v,onClose:_,size:"lg",children:[Object(b.jsx)(u.jb,{closeButton:!0,className:"add-user-modal",children:Object(b.jsx)(u.kb,{children:"Add Max Use"})}),Object(b.jsx)(u.hb,{children:Object(b.jsx)("div",{class:"card-body",children:Object(b.jsxs)("div",{class:"row",children:[Object(b.jsx)("div",{class:"col-sm-6",children:Object(b.jsxs)("div",{class:"form-group",children:[Object(b.jsx)("label",{class:"form-label",for:"expense_name",children:"Include All Users"}),Object(b.jsx)("input",{type:"checkbox",id:"all_users"})]})}),Object(b.jsx)("div",{class:"col-sm-6",children:Object(b.jsxs)("div",{class:"form-group",children:[Object(b.jsx)("label",{class:"form-label",for:"expense_name",children:"Allowed Users"}),Object(b.jsx)("select",{id:"allowed_user",class:"form-control",children:z.map((function(e){return Object(b.jsxs)("option",{value:e.uuid,children:[" ",e.first_name," "]})}))})]})}),Object(b.jsx)("div",{class:"col-sm-6",children:Object(b.jsxs)("div",{class:"form-group",children:[Object(b.jsx)("label",{class:"form-label",for:"date_paid",children:"max_usage_per_user "}),Object(b.jsx)("input",{type:"number",id:"max_usage_per_user",name:"max_usage_per_user",class:"form-control"})]})})]})})}),Object(b.jsxs)(u.ib,{children:[Object(b.jsx)(u.f,{color:"primary",children:"Save"})," ",Object(b.jsx)(u.f,{color:"secondary",onClick:function(){return _(!1)},children:"Close"})]})]})]})}}}]);
//# sourceMappingURL=50.4ea916e8.chunk.js.map